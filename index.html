<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Happy Birthday Eli ğŸ’–</title>

<style>
:root {
  --pink-main:#ff4d6d;
  --pink-soft:#ff8fab;
  --bg-grad:linear-gradient(135deg,#ffc1d9,#ffe4ec);
}

* { box-sizing:border-box; font-family:Arial,sans-serif; }
body {
  margin:0;
  background:var(--bg-grad);
  min-height:100vh;
  overflow:hidden;
}

/* SECTION CONTROL */
section {
  display:none;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  padding:30px 20px;
  width:100%;
  min-height:100vh;
}
section.active { display:flex; }

/* OPENING */
.opening h1 {
  font-size:2.4rem;
  color:var(--pink-main);
}
.gift-img {
  width:180px;
  cursor:pointer;
  animation:float 2.5s ease-in-out infinite;
}
@keyframes float {
  50% { transform:translateY(-15px); }
}

/* BUTTON */
button {
  padding:18px;
  border-radius:50px;
  border:none;
  background:var(--pink-soft);
  color:#fff;
  font-size:1.2rem;
  font-weight:800;
  max-width:400px;
  width:100%;
  margin-top:15px;
}
.btn-main { background:var(--pink-main); }

/* GAME */
.grid {
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:10px;
  max-width:400px;
}
.cell {
  aspect-ratio:1;
  background:#fff;
  border-radius:10px;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:1.5rem;
}

/* SURAT */
.photo {
  width:220px;
  height:220px;
  border-radius:50%;
  border:8px solid white;
  object-fit:cover;
}
#surat-box {
  background:white;
  padding:25px;
  border-radius:25px;
  max-width:520px;
}
#surat-text {
  text-align:left;
  font-size:1.2rem;
  line-height:1.8;
}
</style>
</head>

<body>

<audio id="bgm" src="sky.mp3" loop></audio>
<audio id="typingSound" src="typing.mp3"></audio>

<!-- OPENING -->
<section id="opening" class="active opening">
  <img src="gift.png" class="gift-img" onclick="enterMain()">
  <h1>TAP KADO NYA ğŸ’–</h1>
</section>

<!-- MAIN APP -->
<section id="menu">
  <h1>Happy Birthday Eli ğŸ‚</h1>
  <p>Ada kejutan kecil buat kamu hari ini...</p>
  <button class="btn-main" onclick="showPage('feel')">ğŸ Buka Hadiah</button>
  <button onclick="startGame()">ğŸ’£ Main Game</button>
</section>

<section id="feel">
  <h1>Halo Eli ğŸ¤</h1>
  <p>Hari ini kamu ngerasa disayang gak?</p>
  <button class="btn-main" onclick="showGift()">ğŸ’– Iya</button>
  <button onclick="showGift()">ğŸ¤ Belum</button>
</section>

<section id="game">
  <h1>Hati-hati ğŸ’£</h1>
  <div class="grid" id="bombGrid"></div>
</section>

<section id="gift">
  <img src="eli.jpg" class="photo">
  <div id="surat-box"><div id="surat-text"></div></div>
  <button class="btn-main" onclick="waClose()">Boleh aku nemenin kamu? ğŸ¤</button>
</section>

<script>
const bgm = document.getElementById("bgm");
const typingSound = document.getElementById("typingSound");
const nomorWA = "6283129486122";

function enterMain(){
  bgm.volume = .4;
  bgm.play().catch(()=>{});
  document.getElementById("opening").classList.remove("active");
  showPage("menu");
}

function showPage(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function startGame(){
  showPage("game");
  const grid = document.getElementById("bombGrid");
  grid.innerHTML="";
  const bomb = Math.floor(Math.random()*25);

  for(let i=0;i<25;i++){
    const c=document.createElement("div");
    c.className="cell";
    c.onclick=()=>{
      if(i===bomb){
        c.textContent="ğŸ’£";
        setTimeout(()=>location.href=`https://wa.me/${nomorWA}`,500);
      } else {
        c.textContent="ğŸ’–";
      }
    };
    grid.appendChild(c);
  }
}

function showGift(){
  showPage("gift");
  const text=`Selamat ulang tahun Eli ğŸ¤

Terima kasih sudah ada.
Aku bener-bener sayang kamu.`;
  type(text,50);
}

function type(text,speed){
  const el=document.getElementById("surat-text");
  el.innerHTML="";
  let i=0;
  function run(){
    if(i<text.length){
      el.innerHTML+=text[i]==="\n"?"<br>":text[i];
      typingSound.currentTime=0;
      typingSound.play().catch(()=>{});
      i++; setTimeout(run,speed);
    }
  }
  run();
}

function waClose(){
  location.href=`https://wa.me/${nomorWA}?text=Boleh ğŸ¤`;
}
</script>

</body>
</html>
